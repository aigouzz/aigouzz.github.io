{"version":3,"file":"js/315.43db9a02.js","mappings":"iQAEaA,MAAM,e,GAMAA,MAAM,c,GACJA,MAAM,a,GAKdA,MAAM,iB,GACFA,MAAM,gB,GACFA,MAAM,gB,aAINA,MAAM,c,GACJA,MAAM,U,SACNA,MAAM,U,oBAMjBC,EAAAA,EAAAA,GAA2B,OAAtBD,MAAM,WAAS,W,GAGnBA,MAAM,mB,GACJA,MAAM,W,GAOGA,MAAM,a,GACNA,MAAM,c,wKAvC1BE,EAAAA,EAAAA,IA4CM,OA5CDF,OAAK,SAAC,WAAU,CAAAG,KAAgBC,EAAAA,SAASC,OAAM,MAApD,EACIJ,EAAAA,EAAAA,GAWM,MAXN,EAWM,EAVFK,EAAAA,EAAAA,IASYC,EAAA,MARDC,MAAI,SACb,IAAwD,EAAxDF,EAAAA,EAAAA,IAAwDG,EAAA,CAA9CC,KAAK,aAAaC,KAAK,QAASC,QAAOC,EAAAA,MAAjD,uBAESC,OAAK,SACd,IAEM,EAFNb,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADJA,EAAAA,EAAAA,GAAmD,MAAnD,EAAmD,EAA5BA,EAAAA,EAAAA,GAAsB,aAAAc,EAAAA,EAAAA,IAAdC,EAAAA,OAAK,U,SAK5Cf,EAAAA,EAAAA,GAgBM,MAhBN,EAgBM,EAfFA,EAAAA,EAAAA,GAYM,MAZN,EAYM,EAXFA,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFFA,EAAAA,EAAAA,GAAuC,aAAAc,EAAAA,EAAAA,IAA/BF,EAAAA,YAAYG,EAAAA,YAAS,IAC7Bf,EAAAA,EAAAA,GAAyC,OAAnCgB,IAAKD,EAAAA,QAAQE,cAAeC,IAAI,IAAtC,aAEJlB,EAAAA,EAAAA,GAMM,MANN,EAMM,EALFA,EAAAA,EAAAA,GAA8B,IAA9B,GAA8Bc,EAAAA,EAAAA,IAAVC,EAAAA,MAAI,GACAA,EAAAA,QAAQI,YAAAA,EAAAA,EAAAA,OAAhClB,EAAAA,EAAAA,IAGI,IAHJ,EAGI,EAFFD,EAAAA,EAAAA,GAAgC,OAA1BgB,IAAKD,EAAAA,QAAQI,WAAnB,WACAnB,EAAAA,EAAAA,GAAiC,aAAAc,EAAAA,EAAAA,IAAzBC,EAAAA,QAAQK,UAAQ,OAF1B,mBAMRC,GACArB,EAAAA,EAAAA,GAAkH,OAA7GD,MAAM,YAAYuB,GAAG,UAAWC,OAAK,mCAA+BR,EAAAA,YAAW,qBAApF,WAEJf,EAAAA,EAAAA,GAaI,MAbJ,EAaI,EAZFA,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJK,EAAAA,EAAAA,IAA+CG,EAAA,CAArCC,KAAK,QAAQC,KAAK,WAC5BL,EAAAA,EAAAA,IAAiGmB,EAAA,CAArFzB,MAAM,mBAAmB0B,KAAK,qBAAsBd,QAAOC,EAAAA,SAAvE,C,kBAAgF,IAAI,UAAJ,W,KAAhF,kBAEFZ,EAAAA,EAAAA,GAOI,aANJK,EAAAA,EAAAA,IAKWqB,EAAA,CALAC,QAASZ,EAAAA,UAAYa,SAAUb,EAAAA,SAAUc,aAAa,QAASC,OAAMlB,EAAAA,UAAhF,C,kBACc,IAA6B,gBAAvCX,EAAAA,EAAAA,IAGW8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAHuBjB,EAAAA,MAAI,CAApBkB,EAAMC,M,WAAxBC,EAAAA,EAAAA,IAGWC,EAAA,CAH8BC,IAAKJ,EAAKX,GAAKX,QAAK,GAAEC,EAAAA,UAAUqB,IAAzE,C,kBACI,IAA4C,EAA5CjC,EAAAA,EAAAA,GAA4C,OAA5C,GAA4Cc,EAAAA,EAAAA,IAAlBoB,EAAQ,GAAH,IAC/BlC,EAAAA,EAAAA,GAAkF,OAAlF,GAAkFc,EAAAA,EAAAA,IAAvDmB,EAAKxB,MAAM,OAAGK,EAAAA,EAAAA,IAAEmB,EAAKK,GAAKL,EAAKK,GAAE,GAAI7B,KAAI,U,KAFxE,8B,KADJ,wCApCN,E,+BAiDJ,GACE8B,OACE,MAAO,CACLC,YAAaC,EAAQ,MACrBhC,KAAM,OACNa,GAAI,EACJoB,MAAO,KACPC,UAAW,EACXC,YAAa,OACbC,QAAS,CACP,UAAaJ,EAAQ,MACrB,SAAY,KACZxB,cAAewB,EAAQ,OAEzBK,KAAM,GACNC,MAAO,EACPC,WAAW,EACXpB,UAAU,EAEb,EACDqB,UACEC,KAAKC,OAAS,EACdD,KAAKE,IAAM,EACZ,EAEDC,iBAAkB,CAACC,EAAIC,EAAMC,KAC3BA,GAAKC,IAECC,SAASJ,EAAGK,OAAOrC,MAAQoC,SAASD,EAAGnC,MACzCmC,EAAGN,OAAS,EACZM,EAAGL,IAAM,GACTK,EAAGX,KAAO,GACVW,EAAG7B,UAAW,EACd6B,EAAGG,WAGDN,EAAGK,OAAOE,WAEZJ,EAAGjB,YAAciB,EAAGK,OAAOH,OAAOE,SAClCJ,EAAGhD,KAAOgD,EAAGK,OAAOH,OAAOlD,KAC3BgD,EAAGb,YAAca,EAAGK,OAAOH,OAAOI,KAClCN,EAAGd,UAAYc,EAAGK,OAAOH,OAAOK,MAChCP,EAAGZ,QAAUY,EAAGK,OAAOH,OAAOd,QAC9BY,EAAGnC,GAAKmC,EAAGK,OAAOH,OAAOrC,IAE3B2C,OAAOC,SAAW,KAChB,IAAIC,EAAMF,OAAOG,YAAc,IAE7BX,EAAGf,MADDyB,EAAM,GACGV,EAAGhD,KAEH,IACb,CANF,GAnBF,EA8BF4D,iBAAkB,CAACf,EAAIC,EAAMC,KAC3BS,OAAOC,SAAW,KAClBV,GAAM,EAERc,QAAS,CACPC,OACErB,KAAKsB,QAAQC,IAAI,EAClB,EACDb,UACEc,EAAAA,EAAAA,kBAAsBxB,KAAKY,OAAOH,OAAOrC,IAAIqD,MAAMpC,IACjDW,KAAKV,YAAcD,EAAKqC,SAASpC,YACjCU,KAAKP,UAAYJ,EAAKqC,SAASjC,UAC/BO,KAAKzC,KAAO8B,EAAKqC,SAASnE,KAC1ByC,KAAKL,QAAU,CACb1B,UAAWoB,EAAKqC,SAAS/B,QAAQ1B,UACjCC,SAAUmB,EAAKqC,SAAS/B,QAAQzB,SAChCH,cAAesB,EAAKqC,SAAS/B,QAAQ5B,eAEvCsB,EAAKqC,SAASC,SAASC,SAAQ,CAAC7C,EAAMC,KACtB,IAAVA,GAAgBgB,KAAKE,IAGvBF,KAAKE,KAAQ,IAAGnB,EAAKX,KAFrB4B,KAAKE,KAAQ,GAAEnB,EAAKX,IAGtB,GALF,IAQF4B,KAAK6B,UACN,EACDA,WACE7B,KAAKF,WAAY,EACjB0B,EAAAA,EAAAA,eAAmB,CAACpD,GAAI4B,KAAKY,OAAOH,OAAOrC,GAAI6B,OAAQD,KAAKC,OAAQ6B,MAAO,KAAKL,MAAKpC,IACnFW,KAAKJ,KAAKmC,QAAQ1C,EAAK2C,OACvBhC,KAAKC,QAAU,GACZD,KAAKC,QAAUD,KAAKE,IAAI+B,MAAM,KAAK/E,SACpC8C,KAAKtB,UAAW,GAElBsB,KAAKF,WAAY,CAAjB,IACCoC,OAAOC,IACRC,QAAQC,IAAI,YAAcF,EAA1B,GAEH,EACDG,OAAQC,GACNvC,KAAKH,MAAQ0C,CACd,EACDC,UAAWC,GACTC,SAASC,eAAe,aAAaC,QACrC5C,KAAK6C,OAAOC,OAAO,SACnB9C,KAAK6C,OAAOE,SAAS,UAAWN,EAAKrE,GACtC,EAED4E,UAEEhD,KAAK6C,OAAOE,SAAS,UAAW/C,KAAKE,IACtC,EACD+C,YAAaC,GACX,OAAIA,EAAI,KACCA,GAECA,EAAI,KAAOC,QAAQ,GAAK,GAEpC,GAEFC,SAAU,KACLC,EAAAA,EAAAA,IAAW,CACZ,e,QCnKN,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://vue3-init-music/./src/views/playListDetail.vue","webpack://vue3-init-music/./src/views/playListDetail.vue?dff4"],"sourcesContent":["<template>\n    <div class=\"playList\" :class=\"{view: songList.length > 0}\">\n        <div class=\"fixed-title\">\n            <van-nav-bar>\n            <template #left>\n              <van-icon name='arrow-left' size=\".6rem\" @click=\"back\"/>\n            </template>\n            <template #title>\n              <div class=\"play-title\">\n                <div class=\"play-name\"><span>{{fname}}</span></div>\n              </div>\n            </template>\n          </van-nav-bar>\n        </div>\n        <div class=\"playlist-info\">\n            <div class=\"info-wrapper\">\n                <div class=\"info-gallery\">\n                    <span>{{formatCount(playCount)}}</span>\n                    <img :src=\"creator.backgroundUrl\" alt=\"\">\n                </div>\n                <div class=\"info-title\">\n                    <p class=\"titile\">{{name}}</p>\n                    <p class=\"author\" v-if=\"creator.avatarUrl\">\n                      <img :src=\"creator.avatarUrl\" />\n                      <span>{{creator.nickname}}</span>\n                    </p>\n                </div>\n            </div>\n            <div class=\"bg-mask\"></div>\n            <div class=\"bg-player\" id=\"backImg\" :style=\"{'background-image':'url(' + coverImgUrl + '?param=300y300)'}\" ></div>\n        </div>\n        <div class=\"playlist-holder\">\n          <div class=\"add-all\">\n            <van-icon name=\"add-o\" size=\".5rem\"></van-icon>\n            <van-button class=\"demo-flat-button\" icon=\"add_circle_outline\" @click=\"playAll\">播放全部</van-button>\n          </div>\n          <div>\n          <van-list :loading=\"isloading\" :finished=\"finished\" finishedText=\"没有更多了\" @load=\"loadMore\">\n              <van-cell v-for=\"(item, index) in list\" :key=\"item.id\" @click=\"playAudio(item)\">\n                  <span class=\"list-left\">{{index + 1}}</span>\n                  <span class=\"list-right\">{{item.name}} - {{item.ar ? item.ar[0].name : ''}}</span>\n              </van-cell>\n          </van-list>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\nimport api from '../api'\nimport { mapGetters } from 'vuex'\nexport default {\n  data () {\n    return {\n      coverImgUrl: require('../static/default_cover.png'),\n      name: '歌单标题',\n      id: 0,\n      fname: '歌单',\n      playCount: 0,\n      description: '描述描述',\n      creator: {\n        'avatarUrl': require('../static/user-default.png'),\n        'nickname': '昵称',\n        backgroundUrl: require('../static/default_cover.png')\n      },\n      list: [],\n      value: 0,\n      isloading: false,\n      finished: false\n    }\n  },\n  created() {\n    this.offset = 0\n    this.ids = ''\n  },\n  // 解除keep-alive的缓存\n  beforeRouteEnter: (to, from, next) => {\n    next(vm => {\n      // 根据传过来的ID是否一样，判断加载\n      if (parseInt(to.params.id) !== parseInt(vm.id)) {\n        vm.offset = 0\n        vm.ids = ''\n        vm.list = []\n        vm.finished = false\n        vm.getData()\n      }\n      // 判断过来的路由是否带有对应的参数信息\n      if (to.params.coverImg) {\n         // 获取songList传入的数据\n        vm.coverImgUrl = vm.$route.params.coverImg\n        vm.name = vm.$route.params.name\n        vm.description = vm.$route.params.desc\n        vm.playCount = vm.$route.params.count\n        vm.creator = vm.$route.params.creator\n        vm.id = vm.$route.params.id\n      }\n      window.onscroll = () => {\n        var opa = window.pageYOffset / 150\n        if (opa > 0.5) {\n          vm.fname = vm.name\n        } else {\n          vm.fname = '歌单'\n        }\n      }\n    })\n  },\n  // 路由离开时清除onscroll事件\n  beforeRouteLeave: (to, from, next) => {\n    window.onscroll = null\n    next()\n  },\n  methods: {\n    back () {\n      this.$router.go(-1)\n    },\n    getData () {\n      api.getPlayListDetail(this.$route.params.id).then((data) => {\n        this.coverImgUrl = data.playlist.coverImgUrl\n        this.playCount = data.playlist.playCount\n        this.name = data.playlist.name\n        this.creator = {\n          avatarUrl: data.playlist.creator.avatarUrl,\n          nickname: data.playlist.creator.nickname,\n          backgroundUrl: data.playlist.creator.backgroundUrl,\n        }\n        data.playlist.trackIds.forEach((item, index) => {\n          if (index === 0 && !this.ids) {\n            this.ids += `${item.id}`\n          } else {\n            this.ids += `,${item.id}`\n          }\n        })\n      })\n      this.loadMore()\n    },\n    loadMore() {\n      this.isloading = true\n      api.getPlayListAll({id: this.$route.params.id, offset: this.offset, limit: 10}).then(data => {\n        this.list.push(...data.songs)\n        this.offset += 10\n        if(this.offset >= this.ids.split(',').length) {\n          this.finished = true\n        }\n        this.isloading = false\n      }).catch((error) => {\n        console.log('获取歌单信息出错:' + error)\n      })\n    },\n    change (val) {\n      this.value = val\n    },\n    playAudio (song) {\n      document.getElementById('audioPlay').pause()\n      this.$store.commit('pause')\n      this.$store.dispatch('getSong', song.id)\n    },\n    // 播放全部\n    playAll () {\n      // 添加专辑内所有歌曲到一个新数组\n      this.$store.dispatch('getSong', this.ids)\n    },\n    formatCount (v) {\n      if (v < 9999) {\n        return v\n      } else {\n        return (v / 10000).toFixed(0) + '万'\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'songList'\n    ])\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n    .fixed-title {\n        position: fixed;\n        top: 0;\n        width: 100%;\n        height: 56px;\n        left: 0;\n        z-index: 15;\n        transition: opacity .1s;\n    }\n    .play-name{\n      color: #fff;\n    }\n\n     // 修改默认的bar样式\n    .mu-appbar {\n      background-color: transparent;\n    }\n    .bar-line {\n      display: block;\n      bottom: 0 ;\n      left: 0;\n      display: block;\n      width: 100%;\n      height: 0.05rem;\n      background: radial-gradient(#d3d3d3 -90%, transparent 100%);\n    }\n    .mu-paper-1 {\n      box-shadow: none;\n      > .mu-appbar-title {\n        text-align: center;\n        font-size: 14px;\n      }\n    }\n    // 歌单信息\n    .playlist-info {\n        position: relative;\n        padding: 60px .5rem 0 ;\n        height: 6rem;\n    }\n\n    .info-wrapper {\n        position: relative;\n        z-index: 10;\n        color: #fff;\n        .info-gallery {\n            position: relative;\n            float: left;\n            width: 4rem;\n            overflow: hidden;\n            height: 4rem;\n            span {\n                position: absolute;\n                display: block;\n                padding-right: 5px;\n                width: 100%;\n                left: 0;\n                top: 0;\n                font-size: 12px;\n                text-align: right;\n                background: rgba(0,0,0,.35);\n                z-index: 11;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n            }\n        }\n\n        .info-title {\n            float: left;\n            width: 4rem;\n            margin-left: .625rem;\n            .title {\n                font-size: 16px;\n                word-wrap: wrapper;\n            }\n            .author {\n                span {\n                    overflow: hidden;\n                    display: inline-block;\n                    height: 30px;\n                    text-overflow: ellipsis;\n                    width: 3.4rem;\n                    white-space: nowrap;\n                    font-size: 14px;\n                    vertical-align: top;\n                    line-height: 30px;\n                }\n                img{\n                  width: 1rem;\n                }\n            }\n        }\n    }\n\n    .playlist-holder {\n      position: relative;\n      background: #fff;\n      z-index: 3;\n      padding-bottom: 1.4rem;\n      .add-all {\n          padding-left: .4rem;\n          width: 3rem;\n          i{\n            vertical-align: middle;\n          }\n          button{\n            padding-left: 0;\n          }\n      }\n    }\n\n    // 列表样式\n    .list-left {\n      padding-left: 10px;\n      font-size: 14px;\n      font-weight: bolder;\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .list-right{\n      margin-left: 10px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: inline-block;\n      max-width: 8rem;\n      vertical-align: middle;\n    }\n    .bg-player {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: bottom right;\n        filter: blur(40px);\n        -webkit-filter: blur(40px);\n        z-index: 1;\n    }\n    .bg-mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: #292a2b;\n        background-color: rgba(0,0,0,.35);\n        z-index: 2;\n    }\n    .center {\n      display: block !important;\n      margin: 10% auto 0;\n    }\n    .view {\n      width:100%;\n      margin-bottom:2.3rem;\n    }\n    .mu-item-title {\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      line-height: 1.5;\n    }\n    .demo-flat-button{\n      border: none;\n      &::before{\n        border: none;\n      }\n    }\n</style>\n","import { render } from \"./playListDetail.vue?vue&type=template&id=4d6c2ede&scoped=true\"\nimport script from \"./playListDetail.vue?vue&type=script&lang=js\"\nexport * from \"./playListDetail.vue?vue&type=script&lang=js\"\n\nimport \"./playListDetail.vue?vue&type=style&index=0&id=4d6c2ede&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/aigouzz/fe-project/vue3-init-music/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d6c2ede\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","view","_ctx","length","_createVNode","_component_van_nav_bar","left","_component_van_icon","name","size","onClick","$options","title","_toDisplayString","$data","src","backgroundUrl","alt","avatarUrl","nickname","_hoisted_12","id","style","_component_van_button","icon","_component_van_list","loading","finished","finishedText","onLoad","_Fragment","_renderList","item","index","_createBlock","_component_van_cell","key","ar","data","coverImgUrl","require","fname","playCount","description","creator","list","value","isloading","created","this","offset","ids","beforeRouteEnter","to","from","next","vm","parseInt","params","getData","coverImg","$route","desc","count","window","onscroll","opa","pageYOffset","beforeRouteLeave","methods","back","$router","go","api","then","playlist","trackIds","forEach","loadMore","limit","push","songs","split","catch","error","console","log","change","val","playAudio","song","document","getElementById","pause","$store","commit","dispatch","playAll","formatCount","v","toFixed","computed","mapGetters","__exports__","render"],"sourceRoot":""}