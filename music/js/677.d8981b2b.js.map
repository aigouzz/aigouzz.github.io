{"version":3,"file":"js/677.d8981b2b.js","mappings":"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","sources":["webpack://vue3-init-music/./src/views/playListDetail.vue","webpack://vue3-init-music/./src/views/playListDetail.vue?dff4"],"sourcesContent":["<template>\n    <div class=\"playList\" :class=\"{view: songList.length > 0}\">\n        <div class=\"fixed-title\" :style=\"{'background': 'rgba(206, 61, 62, '+ opacity +')'}\" style=\"transition: opacity .1s;\">\n            <van-nav-bar>\n            <template #left>\n              <van-icon name='arrow-left' size=\".6rem\" @click=\"back\"/>\n            </template>\n            <template #title>\n              <div class=\"play-title\">\n                <div class=\"play-name\"><span>{{fname}}</span></div>\n              </div>\n            </template>\n          </van-nav-bar>\n        </div>\n        <div class=\"playlist-info\">\n            <div class=\"info-wrapper\">\n                <div class=\"info-gallery\">\n                    <span>{{formatCount(playCount)}}</span>\n                    <img :src=\"coverImgUrl + '?param=300y300'\" alt=\"\">\n                </div>\n                <div class=\"info-title\">\n                    <p class=\"titile\">{{name}}</p>\n                    <p class=\"author\" v-if=\"creator.avatarUrl\">\n                      <van-image :src=\"creator.avatarUrl + '?param=50y50'\" />\n                      <span>{{creator.nickname}}</span>\n                    </p>\n                </div>\n            </div>\n            <div class=\"bg-mask\"></div>\n            <div class=\"bg-player\" id=\"backImg\" :style=\"{'background-image':'url(' + coverImgUrl + '?param=300y300)'}\" ></div>\n        </div>\n        <div class=\"playlist-holder\">\n          <div class=\"add-all\">\n            <van-icon name=\"add-o\" size=\".5rem\"></van-icon>\n            <van-button class=\"demo-flat-button\" icon=\"add_circle_outline\" @click=\"playAll\">播放全部</van-button>\n          </div>\n          <div>\n          <van-list loading=\"\" @load=\"change\">\n            <div v-for=\"(item, index) in list\" :key=\"item.id\" @click=\"playAudio(item)\">\n                <van-cell :title=\"item.name\" :value=\"item.id\" :describeText=\"item.ar[0].name\">\n                    <span class=\"indexStyle\">{{index + 1}}</span>\n                </van-cell>\n            </div>\n          </van-list>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\nimport api from '../api'\nimport { mapGetters } from 'vuex'\nexport default {\n  data () {\n    return {\n      coverImgUrl: '../static/default_cover.png',\n      name: '歌单标题',\n      id: 0,\n      fname: '歌单',\n      playCount: 0,\n      description: '描述描述',\n      creator: {\n        'avatarUrl': '../../static/user-default.png',\n        'nickname': '昵称'\n      },\n      list: [],\n      opacity: 0,\n      value: 0,\n      isloading: false\n    }\n  },\n  // 解除keep-alive的缓存\n  beforeRouteEnter: (to, from, next) => {\n    next(vm => {\n      // 根据传过来的ID是否一样，判断加载\n      if (parseInt(to.params.id) !== parseInt(vm.id)) {\n        vm.getData()\n      }\n      // 判断过来的路由是否带有对应的参数信息\n      if (to.params.coverImg) {\n         // 获取songList传入的数据\n        vm.coverImgUrl = vm.$route.params.coverImg\n        vm.name = vm.$route.params.name\n        vm.description = vm.$route.params.desc\n        vm.playCount = vm.$route.params.count\n        vm.creator = vm.$route.params.creator\n        vm.id = vm.$route.params.id\n      }\n      window.onscroll = () => {\n        var opa = window.pageYOffset / 150\n        if (opa > 0.5) {\n          vm.fname = vm.name\n        } else {\n          vm.fname = '歌单'\n        }\n        vm.opacity = window.pageYOffset / 150\n      }\n    })\n  },\n  // 路由离开时清除onscroll事件\n  beforeRouteLeave: (to, from, next) => {\n    window.onscroll = null\n    next()\n  },\n  methods: {\n    back () {\n      this.$router.go(-1)\n    },\n    getData () {\n      this.isloading = true\n      api.getPlayListDetail(this.$route.params.id).then(data => {\n        this.list = data.playlist.tracks\n        this.ids = ''\n        data.playlist.trackIds.forEach((item, index) => {\n          if (index === 0) {\n            this.ids += `${item.id}`\n          } else {\n            this.ids += `,${item.id}`\n          }\n        })\n        this.isloading = false\n      }).catch((error) => {\n        console.log('加载歌单信息出错:' + error)\n      })\n    },\n    change (val) {\n      this.value = val\n    },\n    playAudio (song) {\n      document.getElementById('audioPlay').pause()\n      this.$store.commit('pause')\n      this.$store.dispatch('getSong', song.id)\n    },\n    // 播放全部\n    playAll () {\n      // 添加专辑内所有歌曲到一个新数组\n      this.$store.dispatch('getSong', this.ids)\n    },\n    formatCount (v) {\n      if (v < 9999) {\n        return v\n      } else {\n        return (v / 10000).toFixed(0) + '万'\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'songList'\n    ])\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n    .fixed-title {\n        position: fixed;\n        top: 0;\n        width: 100%;\n        height: 56px;\n        left: 0;\n        z-index: 15;\n    }\n    .play-name{\n      color: #fff;\n    }\n\n     // 修改默认的bar样式\n    .mu-appbar {\n      background-color: transparent;\n    }\n    .bar-line {\n      display: block;\n      bottom: 0 ;\n      left: 0;\n      display: block;\n      width: 100%;\n      height: 0.05rem;\n      background: radial-gradient(#d3d3d3 -90%, transparent 100%);\n    }\n    .mu-paper-1 {\n      box-shadow: none;\n      > .mu-appbar-title {\n        text-align: center;\n        font-size: 14px;\n      }\n    }\n    // 歌单信息\n    .playlist-info {\n        position: relative;\n        padding: 60px .5rem 0 ;\n        height: 6rem;\n    }\n\n    .info-wrapper {\n        position: relative;\n        z-index: 10;\n        color: #fff;\n        .info-gallery {\n            position: relative;\n            float: left;\n            width: 4rem;\n            overflow: hidden;\n            span {\n                position: absolute;\n                display: block;\n                padding-right: 5px;\n                width: 100%;\n                left: 0;\n                top: 0;\n                font-size: 12px;\n                text-align: right;\n                background: rgba(0,0,0,.35);\n                z-index: 11;\n            }\n            img {\n                max-width: 100%;\n                height: auto;\n            }\n        }\n\n        .info-title {\n            float: left;\n            width: 5rem;\n            margin-left: .625rem;\n            .title {\n                font-size: 16px;\n                word-wrap: wrapper;\n            }\n            .author {\n                span {\n                    overflow: hidden;\n                    display: inline-block;\n                    height: 30px;\n                    text-overflow: ellipsis;\n                    width: 3.4rem;\n                    white-space: nowrap;\n                    font-size: 14px;\n                    vertical-align: top;\n                    line-height: 30px;\n                }\n            }\n        }\n    }\n\n    .playlist-holder {\n      position: relative;\n      background: #fff;\n      z-index: 3;\n      .add-all {\n          padding-left: .4rem;\n          width: 3rem;\n          i{\n            vertical-align: middle;\n          }\n          button{\n            padding-left: 0;\n          }\n      }\n    }\n\n    // 列表样式\n    .indexStyle {\n      padding-left: 10px;\n      font-size: 18px;\n      font-weight: bolder;\n    }\n    .mu-item-title {\n      white-space:nowrap;\n      height: 1.7rem;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    .bg-player {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: bottom right;\n        filter: blur(40px);\n        -webkit-filter: blur(40px);\n        z-index: 1;\n    }\n    .bg-mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: #292a2b;\n        background-color: rgba(0,0,0,.35);\n        z-index: 2;\n    }\n    .center {\n      display: block !important;\n      margin: 10% auto 0;\n    }\n    .view {\n      width:100%;\n      margin-bottom:2.3rem;\n    }\n    .mu-item-title {\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      line-height: 1.5;\n    }\n    .demo-flat-button{\n      border: none;\n      &::before{\n        border: none;\n      }\n    }\n</style>\n","import { render } from \"./playListDetail.vue?vue&type=template&id=8a33f0fa&scoped=true\"\nimport script from \"./playListDetail.vue?vue&type=script&lang=js\"\nexport * from \"./playListDetail.vue?vue&type=script&lang=js\"\n\nimport \"./playListDetail.vue?vue&type=style&index=0&id=8a33f0fa&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/aigouzz/fe-project/vue3-init-music/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8a33f0fa\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","view","_ctx","length","style","$data","_createVNode","_component_van_nav_bar","left","_component_van_icon","name","size","onClick","$options","title","_toDisplayString","src","alt","avatarUrl","_component_van_image","nickname","_hoisted_10","id","_component_van_button","icon","_component_van_list","loading","onLoad","_Fragment","_renderList","item","index","key","_component_van_cell","value","describeText","ar","data","coverImgUrl","fname","playCount","description","creator","list","opacity","isloading","beforeRouteEnter","to","from","next","vm","parseInt","params","getData","coverImg","$route","desc","count","window","onscroll","opa","pageYOffset","beforeRouteLeave","methods","back","this","$router","go","api","then","playlist","tracks","ids","trackIds","forEach","catch","error","console","log","change","val","playAudio","song","document","getElementById","pause","$store","commit","dispatch","playAll","formatCount","v","toFixed","computed","mapGetters","__exports__","render"],"sourceRoot":""}