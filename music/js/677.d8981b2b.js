"use strict";(self["webpackChunkvue3_init_music"]=self["webpackChunkvue3_init_music"]||[]).push([[677],{9677:function(a,t,e){e.r(t),e.d(t,{default:function(){return D}});var i=e(3396),l=e(7139);const s=a=>((0,i.dD)("data-v-8a33f0fa"),a=a(),(0,i.Cn)(),a),n={class:"play-title"},r={class:"play-name"},o={class:"playlist-info"},c={class:"info-wrapper"},d={class:"info-gallery"},u=["src"],p={class:"info-title"},m={class:"titile"},v={key:0,class:"author"},g=s((()=>(0,i._)("div",{class:"bg-mask"},null,-1))),f={class:"playlist-holder"},_={class:"add-all"},y=["onClick"],w={class:"indexStyle"};function h(a,t,e,s,h,k){const b=(0,i.up)("van-icon"),C=(0,i.up)("van-nav-bar"),$=(0,i.up)("van-image"),I=(0,i.up)("van-button"),D=(0,i.up)("van-cell"),U=(0,i.up)("van-list");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["playList",{view:a.songList.length>0}])},[(0,i._)("div",{class:"fixed-title",style:(0,l.j5)([{background:"rgba(206, 61, 62, "+h.opacity+")"},{transition:"opacity .1s"}])},[(0,i.Wm)(C,null,{left:(0,i.w5)((()=>[(0,i.Wm)(b,{name:"arrow-left",size:".6rem",onClick:k.back},null,8,["onClick"])])),title:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",r,[(0,i._)("span",null,(0,l.zw)(h.fname),1)])])])),_:1})],4),(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("span",null,(0,l.zw)(k.formatCount(h.playCount)),1),(0,i._)("img",{src:h.coverImgUrl+"?param=300y300",alt:""},null,8,u)]),(0,i._)("div",p,[(0,i._)("p",m,(0,l.zw)(h.name),1),h.creator.avatarUrl?((0,i.wg)(),(0,i.iD)("p",v,[(0,i.Wm)($,{src:h.creator.avatarUrl+"?param=50y50"},null,8,["src"]),(0,i._)("span",null,(0,l.zw)(h.creator.nickname),1)])):(0,i.kq)("",!0)])]),g,(0,i._)("div",{class:"bg-player",id:"backImg",style:(0,l.j5)({"background-image":"url("+h.coverImgUrl+"?param=300y300)"})},null,4)]),(0,i._)("div",f,[(0,i._)("div",_,[(0,i.Wm)(b,{name:"add-o",size:".5rem"}),(0,i.Wm)(I,{class:"demo-flat-button",icon:"add_circle_outline",onClick:k.playAll},{default:(0,i.w5)((()=>[(0,i.Uk)("播放全部")])),_:1},8,["onClick"])]),(0,i._)("div",null,[(0,i.Wm)(U,{loading:"",onLoad:k.change},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.list,((a,t)=>((0,i.wg)(),(0,i.iD)("div",{key:a.id,onClick:t=>k.playAudio(a)},[(0,i.Wm)(D,{title:a.name,value:a.id,describeText:a.ar[0].name},{default:(0,i.w5)((()=>[(0,i._)("span",w,(0,l.zw)(t+1),1)])),_:2},1032,["title","value","describeText"])],8,y)))),128))])),_:1},8,["onLoad"])])])],2)}var k=e(3744),b=e(65),C={data(){return{coverImgUrl:"../static/default_cover.png",name:"歌单标题",id:0,fname:"歌单",playCount:0,description:"描述描述",creator:{avatarUrl:"../../static/user-default.png",nickname:"昵称"},list:[],opacity:0,value:0,isloading:!1}},beforeRouteEnter:(a,t,e)=>{e((t=>{parseInt(a.params.id)!==parseInt(t.id)&&t.getData(),a.params.coverImg&&(t.coverImgUrl=t.$route.params.coverImg,t.name=t.$route.params.name,t.description=t.$route.params.desc,t.playCount=t.$route.params.count,t.creator=t.$route.params.creator,t.id=t.$route.params.id),window.onscroll=()=>{var a=window.pageYOffset/150;t.fname=a>.5?t.name:"歌单",t.opacity=window.pageYOffset/150}}))},beforeRouteLeave:(a,t,e)=>{window.onscroll=null,e()},methods:{back(){this.$router.go(-1)},getData(){this.isloading=!0,k.Z.getPlayListDetail(this.$route.params.id).then((a=>{this.list=a.playlist.tracks,this.ids="",a.playlist.trackIds.forEach(((a,t)=>{this.ids+=0===t?`${a.id}`:`,${a.id}`})),this.isloading=!1})).catch((a=>{console.log("加载歌单信息出错:"+a)}))},change(a){this.value=a},playAudio(a){document.getElementById("audioPlay").pause(),this.$store.commit("pause"),this.$store.dispatch("getSong",a.id)},playAll(){this.$store.dispatch("getSong",this.ids)},formatCount(a){return a<9999?a:(a/1e4).toFixed(0)+"万"}},computed:{...(0,b.Se)(["songList"])}},$=e(89);const I=(0,$.Z)(C,[["render",h],["__scopeId","data-v-8a33f0fa"]]);var D=I}}]);
//# sourceMappingURL=677.d8981b2b.js.map