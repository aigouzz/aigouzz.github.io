{"version":3,"sources":["webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?d707","webpack:///./src/views/Order.vue?57f7","webpack:///./src/components/SimpleHeader.vue?cfb7","webpack:///./src/service/order.js","webpack:///./src/views/Order.vue","webpack:///./src/views/Order.vue?a708"],"names":["class","_createElementVNode","_hoisted_1","$setup","_createElementBlock","onClick","_hoisted_3","$props","_hoisted_4","_hoisted_5","props","name","type","String","default","back","noback","Boolean","emits","setup","ctx","isback","ref","router","useRouter","goBack","push","path","go","emit","__exports__","render","createOrder","params","axios","post","getOrderList","get","getOrderDetail","id","cancelOrder","put","confirmOrder","payOrder","_createVNode","_component_s_header","_component_van_tabs","color","title-active-color","_ctx","_component_van_tab","title","_hoisted_2","_component_van_pull_refresh","onRefresh","_component_van_list","loading","finished","finished-text","onLoad","onOffset","_Fragment","item","index","key","orderNo","createTime","orderStatusString","newBeeMallOrderItemVOS","one","_createBlock","_component_van_card","orderId","num","goodsCount","price","sellingPrice","desc","goodsName","thumb","prefix","goodsCoverImg","components","sHeader","state","reactive","status","refreshing","list","page","totalPage","loadData","async","data","pageNumber","concat","onChangeTab","goTo","query","console","log","toRefs"],"mappings":"uNAEUA,MAAM,sC,aAGPA,MAAM,sB,QACXC,gCAA6B,KAA1BD,MAAM,iBAAe,U,QAE1BC,gCAAqB,OAAhBD,MAAM,SAAO,U,4GANlBC,gCAKS,SALTC,EAKS,CAJGC,U,yBACVC,gCAAkD,MAAxC,YADM,yBAAhBA,gCAA8D,K,MAA5CJ,MAAM,kBAAmBK,QAAK,oBAAEF,6BAElDF,gCAAgD,MAAhDK,EAAgD,6BAAbC,QAAI,GACvCC,IAEFC,GAAqB,I,0BAMR,GACbC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAAS,IAEXC,KAAM,CACJH,KAAMC,OACNC,QAAS,IAEXE,OAAQ,CACNJ,KAAMK,QACNH,SAAS,IAGbI,MAAO,CAAC,YACRC,MAAMT,EAAOU,GACX,MAAMC,EAASC,iBAAIZ,EAAMM,QACnBO,EAASC,iBACTC,EAAS,KACRf,EAAMK,KAGTQ,EAAOG,KAAK,CAAEC,KAAMjB,EAAMK,OAF1BQ,EAAOK,IAAI,GAIbR,EAAIS,KAAK,aAEX,MAAO,CACLJ,SACAJ,Y,iCCpCN,MAAMS,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,U,oCCTf,W,oFCAA,W,oCCCA,4NAEO,SAASC,EAAYC,GAC1B,OAAOC,OAAMC,KAAK,aAAcF,GAG3B,SAASG,EAAaH,GAC3B,OAAOC,OAAMG,IAAI,SAAU,CAAEJ,WAGxB,SAASK,EAAeC,GAC7B,OAAOL,OAAMG,IAAK,UAASE,GAGtB,SAASC,EAAYD,GAC1B,OAAOL,OAAMO,IAAK,UAASF,YAGtB,SAASG,EAAaH,GAC3B,OAAOL,OAAMO,IAAK,UAASF,YAGtB,SAASI,EAASV,GACvB,OAAOC,OAAMG,IAAI,cAAe,CAAEJ,a,kECtB7BjC,MAAM,a,GAUJA,MAAM,W,iBAUEA,MAAM,qB,6UApBrBI,gCAqCM,MArCNF,EAqCM,CApCJ0C,yBAAoDC,GAAzClC,KAAM,OAASI,KAAM,UAChC6B,yBAOWE,GAPAzC,QAAOF,cAAc4C,MAAO,UAAYC,qBAAoB,UAAWhD,MAAM,Y,WAAqBiD,S,qCAAAA,SAAM,I,8BACjH,IAAsC,CAAtCL,yBAAsCM,GAA7BC,MAAM,KAAKxC,KAAK,KACzBiC,yBAAwCM,GAA/BC,MAAM,MAAMxC,KAAK,MAC1BiC,yBAAwCM,GAA/BC,MAAM,MAAMxC,KAAK,MAC1BiC,yBAAwCM,GAA/BC,MAAM,MAAMxC,KAAK,MAC1BiC,yBAAwCM,GAA/BC,MAAM,MAAMxC,KAAK,MAC1BiC,yBAAyCM,GAAhCC,MAAM,OAAOxC,KAAK,Q,iCAE7BV,gCA0BM,MA1BNmD,EA0BM,CAzBJR,yBAwBmBS,G,WAxBQJ,a,qCAAAA,aAAU,GAAGK,UAASnD,YAAWH,MAAM,sB,8BAChE,IAsBW,CAtBX4C,yBAsBWW,GArBDC,QAASP,U,kCAAAA,UAAO,GACvBQ,SAAUR,WACXS,gBAAc,QACbC,OAAMxD,SACNyD,SAAM,GAAE,I,8BAEJ,IAA6B,6BAAlCxD,gCAcMyD,2CAduBZ,OAAI,CAApBa,EAAMC,K,yBAAnB3D,gCAcM,OAd8B4D,IAAKD,EAAO/D,MAAM,iBAAkBK,QAAK,GAAEF,OAAK2D,EAAKG,U,CACvFhE,gCAGM,MAHNO,EAGM,CAFJP,gCAAuC,YAAjC,QAAK,6BAAG6D,EAAKI,YAAU,GAC7BjE,gCAAyC,yCAAhC6D,EAAKK,mBAAiB,iCAEjC/D,gCAQEyD,2CAPcC,EAAKM,uBAAZC,I,yBADTC,yBAQEC,GANCP,IAAKK,EAAIG,QACTC,IAAKJ,EAAIK,WACTC,MAAON,EAAIO,aACZC,KAAK,OACJ1B,MAAOkB,EAAIS,UACXC,MAAO9B,WAAS+B,OAAOX,EAAIY,gB,mMAe3B,GACbtE,KAAM,QACNuE,WAAY,CACVC,gBAEFhE,QACE,MAAMI,EAASC,iBACT4D,EAAQC,sBAAS,CACrBC,OAAQ,GACR9B,SAAS,EACTC,UAAU,EACV8B,YAAY,EACZC,KAAM,GACNC,KAAM,EACNC,UAAW,IAGPC,EAAWC,UACf,MAAM,KAAEC,EAAMA,MAAM,KAAEL,UAAiBpD,eAAa,CAAE0D,WAAYV,EAAMK,KAAMH,OAAQF,EAAME,SAC5FF,EAAMI,KAAOJ,EAAMI,KAAKO,OAAOP,GAC/BJ,EAAMM,UAAYG,EAAKH,UACvBN,EAAM5B,SAAU,EACZ4B,EAAMK,MAAQI,EAAKH,YAAWN,EAAM3B,UAAW,IAG/CuC,EAAerF,IAEnByE,EAAME,OAAS3E,EACf2C,KAGI2C,EAAQ1D,IACZhB,EAAOG,KAAK,CAAEC,KAAM,gBAAiBuE,MAAO,CAAE3D,SAG1Cd,EAAS,KACbF,EAAOK,IAAI,IAGP+B,EAAS,MACRyB,EAAMG,YAAcH,EAAMK,KAAOL,EAAMM,YAC1CS,QAAQC,IAAIhB,EAAMK,MAClBU,QAAQC,IAAIhB,EAAMM,WAClBN,EAAMK,KAAOL,EAAMK,KAAO,GAExBL,EAAMG,aACRH,EAAMI,KAAO,GACbJ,EAAMG,YAAa,GAErBI,KAGIrC,EAAY,KAChB8B,EAAMG,YAAa,EACnBH,EAAM3B,UAAW,EACjB2B,EAAM5B,SAAU,EAChB4B,EAAMK,KAAO,EACb9B,KAGF,MAAO,IACF0C,oBAAOjB,GACVY,cACAC,OACAxE,SACAkC,SACAL,e,iCC3GN,MAAMxB,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"js/order.a9af5f5c.js","sourcesContent":["\n<template>\n  <header class=\"simple-header van-hairline--bottom\">\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">{{ name }}</div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n  <div class=\"block\" />\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    .simple-header-name {\n      font-size: 14px;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=185b1a6a&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=185b1a6a&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/aigouzz/fe-project/vue3-vant-app/node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-185b1a6a\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/.pnpm/registry.npmmirror.com+less-loader@7.3.0_less@3.13.1/node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/index.js??ref--1-1!./Order.vue?vue&type=style&index=0&id=6d4e046c&lang=less&scoped=true\"","export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/.pnpm/registry.npmmirror.com+less-loader@7.3.0_less@3.13.1/node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/index.js??ref--1-1!./SimpleHeader.vue?vue&type=style&index=0&id=185b1a6a&lang=less&scoped=true\"","\nimport axios from '../utils/axios'\n\nexport function createOrder(params) {\n  return axios.post('/saveOrder', params);\n}\n\nexport function getOrderList(params) {\n  return axios.get('/order', { params });\n}\n\nexport function getOrderDetail(id) {\n  return axios.get(`/order/${id}`);\n}\n\nexport function cancelOrder(id) {\n  return axios.put(`/order/${id}/cancel`);\n}\n\nexport function confirmOrder(id) {\n  return axios.put(`/order/${id}/finish`)\n}\n\nexport function payOrder(params) {\n  return axios.get('/paySuccess', { params })\n}\n\n\n\n\n","\n<template>\n  <div class=\"order-box\">\n    <s-header :name=\"'我的订单'\" :back=\"'/user'\"></s-header>\n    <van-tabs @click=\"onChangeTab\" :color=\"'#1baeae'\" :title-active-color=\"'#1baeae'\" class=\"order-tab\" v-model=\"status\">\n      <van-tab title=\"全部\" name=''></van-tab>\n      <van-tab title=\"待付款\" name=\"0\"></van-tab>\n      <van-tab title=\"待确认\" name=\"1\"></van-tab>\n      <van-tab title=\"待发货\" name=\"2\"></van-tab>\n      <van-tab title=\"已发货\" name=\"3\"></van-tab>\n      <van-tab title=\"交易完成\" name=\"4\"></van-tab>\n    </van-tabs>\n    <div class=\"content\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"order-list-refresh\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          finished-text=\"没有更多了\"\n          @load=\"onLoad\"\n          @offset=\"10\"\n        >\n          <div v-for=\"(item, index) in list\" :key=\"index\" class=\"order-item-box\" @click=\"goTo(item.orderNo)\">\n            <div class=\"order-item-header\">\n              <span>订单时间：{{ item.createTime }}</span>\n              <span>{{ item.orderStatusString }}</span>\n            </div>\n            <van-card\n              v-for=\"one in item.newBeeMallOrderItemVOS\"\n              :key=\"one.orderId\"\n              :num=\"one.goodsCount\"\n              :price=\"one.sellingPrice\"\n              desc=\"全场包邮\"\n              :title=\"one.goodsName\"\n              :thumb=\"$filters.prefix(one.goodsCoverImg)\"\n            />\n          </div>\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue';\nimport sHeader from '@/components/SimpleHeader'\nimport { getOrderList } from '@/service/order'\nimport { useRouter } from 'vue-router';\n\nexport default {\n  name: 'Order',\n  components: {\n    sHeader\n  },\n  setup() {\n    const router = useRouter()\n    const state = reactive({\n      status: '',\n      loading: false,\n      finished: false,\n      refreshing: false,\n      list: [],\n      page: 1,\n      totalPage: 0\n    })\n\n    const loadData = async () => {\n      const { data, data: { list } } = await getOrderList({ pageNumber: state.page, status: state.status })\n      state.list = state.list.concat(list)\n      state.totalPage = data.totalPage\n      state.loading = false;\n      if (state.page >= data.totalPage) state.finished = true\n    }\n\n    const onChangeTab = (name) => {\n      // 这里 Tab 最好采用点击事件，@click，如果用 @change 事件，会默认进来执行一次。\n      state.status = name\n      onRefresh()\n    }\n\n    const goTo = (id) => {\n      router.push({ path: '/order-detail', query: { id } })\n    }\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const onLoad = () => {\n      if (!state.refreshing && state.page < state.totalPage) {\n        console.log(state.page)\n        console.log(state.totalPage)\n        state.page = state.page + 1\n      }\n      if (state.refreshing) {\n        state.list = [];\n        state.refreshing = false;\n      }\n      loadData()\n    }\n\n    const onRefresh = () => {\n      state.refreshing = true\n      state.finished = false\n      state.loading = true\n      state.page = 1\n      onLoad()\n    }\n\n    return {\n      ...toRefs(state),\n      onChangeTab,\n      goTo,\n      goBack,\n      onLoad,\n      onRefresh\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .order-box {\n    .order-header {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 10000;\n      .fj();\n      .wh(100%, 44px);\n      line-height: 44px;\n      padding: 0 10px;\n      .boxSizing();\n      color: #252525;\n      background: #fff;\n      border-bottom: 1px solid #dcdcdc;\n      .order-name {\n        font-size: 14px;\n      }\n    }\n    .order-tab {\n      position: fixed;\n      left: 0;\n      z-index: 1000;\n      width: 100%;\n      border-bottom: 1px solid #e9e9e9;\n    }\n    .skeleton {\n      margin-top: 60px;\n    }\n    .content {\n      height: calc(~\"(100vh - 70px)\");\n      overflow: hidden;\n      overflow-y: scroll; \n      margin-top: 34px;\n    }\n    .order-list-refresh {\n      .van-card__content {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n      }\n      .van-pull-refresh__head {\n        background: #f9f9f9;\n      }\n      .order-item-box {\n        margin: 20px 10px;\n        background-color: #fff;\n        .order-item-header {\n          padding: 10px 20px 0 20px;\n          display: flex;\n          justify-content: space-between;\n        }\n        .van-card {\n          background-color: #fff;\n          margin-top: 0;\n        }\n      }\n    }\n  }\n</style>\n","import { render } from \"./Order.vue?vue&type=template&id=6d4e046c&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=6d4e046c&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/aigouzz/fe-project/vue3-vant-app/node_modules/.pnpm/registry.npmmirror.com+vue-loader@16.8.3_b53wtzco7jeucllrao5nrweyei/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6d4e046c\"]])\n\nexport default __exports__"],"sourceRoot":""}