(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-list"],{"2c57":function(e,t,c){"use strict";c("354d")},"354d":function(e,t,c){},"360d":function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return n})),c.d(t,"c",(function(){return r}));var o=c("a27e");function a(e){return o["a"].get("/goods/detail/"+e)}function n(){return o["a"].get("/categories")}function r(e){return o["a"].get("/search",{params:e})}},"96fc":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a=e=>(Object(o["pushScopeId"])("data-v-bc10c70e"),e=e(),Object(o["popScopeId"])(),e),n={class:"product-list-wrap"},r={class:"product-list-content"},s={class:"category-header wrap"},d={class:"header-search"},i=a(()=>Object(o["createElementVNode"])("i",{class:"nbicon nbSearch"},null,-1)),l={class:"content"},p=["onClick"],b=["src"],g={class:"product-info"},u={class:"name"},h={class:"subtitle"},O={class:"price"},f={key:1,class:"empty",src:"https://s.yezgea02.com/1604041313083/kesrtd.png",alt:"搜索"};function j(e,t,c,a,j,m){const k=Object(o["resolveComponent"])("van-tab"),y=Object(o["resolveComponent"])("van-tabs"),v=Object(o["resolveComponent"])("van-list"),V=Object(o["resolveComponent"])("van-pull-refresh");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("header",s,[Object(o["createElementVNode"])("i",{class:"nbicon nbfanhui",onClick:t[0]||(t[0]=(...e)=>a.goBack&&a.goBack(...e))}),Object(o["createElementVNode"])("div",d,[i,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"search-title","onUpdate:modelValue":t[1]||(t[1]=t=>e.keyword=t)},null,512),[[o["vModelText"],e.keyword]])]),Object(o["createElementVNode"])("span",{class:"search-btn",onClick:t[2]||(t[2]=(...e)=>a.getSearch&&a.getSearch(...e))},"搜索")]),Object(o["createVNode"])(y,{type:"card",color:"#1baeae",onClick:a.changeTab},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(k,{title:"推荐",name:""}),Object(o["createVNode"])(k,{title:"新品",name:"new"}),Object(o["createVNode"])(k,{title:"价格",name:"price"})]),_:1},8,["onClick"])]),Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(V,{modelValue:e.refreshing,"onUpdate:modelValue":t[4]||(t[4]=t=>e.refreshing=t),onRefresh:a.onRefresh,class:"product-list-refresh"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(v,{loading:e.loading,"onUpdate:loading":t[3]||(t[3]=t=>e.loading=t),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:a.onLoad,onOffset:e=>10},{default:Object(o["withCtx"])(()=>[e.productList.length?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.productList,(t,c)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"product-item",key:c,onClick:e=>a.productDetail(t)},[Object(o["createElementVNode"])("img",{src:e.$filters.prefix(t.goodsCoverImg)},null,8,b),Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("p",u,Object(o["toDisplayString"])(t.goodsName),1),Object(o["createElementVNode"])("p",h,Object(o["toDisplayString"])(t.goodsIntro),1),Object(o["createElementVNode"])("span",O,"￥ "+Object(o["toDisplayString"])(t.sellingPrice),1)])],8,p))),128)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",f))]),_:1},8,["loading","finished","finished-text","onLoad"])]),_:1},8,["modelValue","onRefresh"])])])}c("14d9");var m=c("6605"),k=c("360d"),y={setup(){const e=Object(m["c"])(),t=Object(m["d"])(),c=Object(o["reactive"])({keyword:e.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),a=async()=>{const{categoryId:t}=e.query;if(!t&&!c.keyword)return c.finished=!0,void(c.loading=!1);const{data:o,data:{list:a}}=await Object(k["c"])({pageNumber:c.page,goodsCategoryId:t,keyword:c.keyword,orderBy:c.orderBy});c.productList=c.productList.concat(a),c.totalPage=o.totalPage,c.loading=!1,c.page>=o.totalPage&&(c.finished=!0)},n=()=>{t.go(-1)},r=e=>{t.push({path:"/product/"+e.goodsId})},s=()=>{i()},d=()=>{!c.refreshing&&c.page<c.totalPage&&(c.page=c.page+1),c.refreshing&&(c.productList=[],c.refreshing=!1),a()},i=()=>{c.refreshing=!0,c.finished=!1,c.loading=!0,c.page=1,d()},l=e=>{console.log("name",e),c.orderBy=e,i()};return{...Object(o["toRefs"])(c),goBack:n,productDetail:r,getSearch:s,changeTab:l,onLoad:d,onRefresh:i}}},v=(c("2c57"),c("6b0d")),V=c.n(v);const w=V()(y,[["render",j],["__scopeId","data-v-bc10c70e"]]);t["default"]=w}}]);
//# sourceMappingURL=product-list.69141dae.js.map