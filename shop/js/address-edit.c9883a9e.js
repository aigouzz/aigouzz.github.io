(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["address-edit"],{"0eaf":function(e,t,a){"use strict";var n=a("0324");const c=e=>(Object(n["pushScopeId"])("data-v-185b1a6a"),e=e(),Object(n["popScopeId"])(),e),s={class:"simple-header van-hairline--bottom"},r={key:1},d={class:"simple-header-name"},o=c(()=>Object(n["createElementVNode"])("i",{class:"nbicon nbmore"},null,-1)),i=c(()=>Object(n["createElementVNode"])("div",{class:"block"},null,-1));function l(e,t,a,c,l,u){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("header",s,[c.isback?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",r,"      ")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:0,class:"nbicon nbfanhui",onClick:t[0]||(t[0]=(...e)=>c.goBack&&c.goBack(...e))})),Object(n["createElementVNode"])("div",d,Object(n["toDisplayString"])(a.name),1),o]),i],64)}a("f9ff");var u=a("7542"),b={props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},emits:["callback"],setup(e,t){const a=Object(n["ref"])(e.noback),c=Object(u["d"])(),s=()=>{e.back?c.push({path:e.back}):c.go(-1),t.emit("callback")};return{goBack:s,isback:a}}},f=(a("90db"),a("9954")),p=a.n(f);const m=p()(b,[["render",l],["__scopeId","data-v-185b1a6a"]]);t["a"]=m},"3d50":function(e,t,a){},"3f49":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return i}));var n=a("a27e");function c(e){return n["a"].post("/address",e)}function s(e){return n["a"].put("/address",e)}function r(e){return n["a"].delete("/address/"+e)}function d(){return n["a"].get("/address/default")}function o(){return n["a"].get("/address",{pageNumber:1,pageSize:1e3})}function i(e){return n["a"].get("/address/"+e)}},"44a9":function(e,t,a){},"77d2":function(e,t,a){"use strict";a.r(t);var n=a("0324");const c={class:"address-edit-box"};function s(e,t,a,s,r,d){const o=Object(n["resolveComponent"])("s-header"),i=Object(n["resolveComponent"])("van-address-edit");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(o,{name:""+("add"==e.type?"新增地址":"编辑地址")},null,8,["name"]),Object(n["createVNode"])(i,{class:"edit","area-list":e.areaList,"address-info":e.addressInfo,"show-delete":"edit"==e.type,"show-set-default":"","show-search-result":"","search-result":e.searchResult,"area-columns-placeholder":["请选择","请选择","请选择"],onSave:s.onSave,onDelete:s.onDelete},null,8,["area-list","address-info","show-delete","search-result","onSave","onDelete"])])}a("f106");var r=a("6e4c"),d=a("0eaf"),o=a("3f49"),i=a("495f"),l=a("7542"),u={components:{sHeader:d["a"]},setup(){const e=Object(l["c"])(),t=Object(l["d"])(),a=Object(n["reactive"])({areaList:{province_list:{},city_list:{},county_list:{}},searchResult:[],type:"add",addressId:"",addressInfo:{},from:e.query.from});Object(n["onMounted"])(async()=>{let t={},n={},c={};i["d"].getLev1().forEach(e=>{t[e.id]=e.text,i["d"].getLev2(e.id).forEach(e=>{n[e.id]=e.text,i["d"].getLev3(e.id).forEach(e=>c[e.id]=e.text)})}),a.areaList.province_list=t,a.areaList.city_list=n,a.areaList.county_list=c;const{addressId:s,type:r,from:d}=e.query;if(a.addressId=s,a.type=r,a.from=d||"","edit"==r){const{data:e}=await Object(o["d"])(s);let t="";const n=i["d"].getLev1();Object.entries(a.areaList.county_list).forEach(([c,s])=>{if(s==e.regionName){const s=n.findIndex(e=>e.id.substr(0,2)==c.substr(0,2)),r=Object.entries(a.areaList.city_list).filter(([e,t])=>e.substr(0,4)==c.substr(0,4))[0];n[s].text==e.provinceName&&r[1]==e.cityName&&(t=c)}}),a.addressInfo={id:e.addressId,name:e.userName,tel:e.userPhone,province:e.provinceName,city:e.cityName,county:e.regionName,addressDetail:e.detailAddress,areaCode:t,isDefault:!!e.defaultFlag}}});const c=async e=>{const n={userName:e.name,userPhone:e.tel,provinceName:e.province,cityName:e.city,regionName:e.county,detailAddress:e.addressDetail,defaultFlag:e.isDefault?1:0};"edit"==a.type&&(n["addressId"]=a.addressId),"add"==await a.type?Object(o["c"])(n):Object(o["b"])(n),Object(r["a"])("保存成功"),setTimeout(()=>{t.back()},1e3)},s=async()=>{await Object(o["a"])(a.addressId),Object(r["a"])("删除成功"),setTimeout(()=>{t.back()},1e3)};return{...Object(n["toRefs"])(a),onSave:c,onDelete:s}}},b=(a("d4c4"),a("9954")),f=a.n(b);const p=f()(u,[["render",s]]);t["default"]=p},"90db":function(e,t,a){"use strict";a("44a9")},d4c4:function(e,t,a){"use strict";a("3d50")}}]);
//# sourceMappingURL=address-edit.c9883a9e.js.map