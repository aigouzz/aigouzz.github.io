"use strict";(self["webpackChunkvue3_init_pc_shop"]=self["webpackChunkvue3_init_pc_shop"]||[]).push([[793],{2778:function(t,e,i){i.d(e,{Z:function(){return p}});var s=i(4317),n=i(5964);const a=["type","disabled","value"];function l(t,e,i,l,o,r){return(0,s.wg)(),(0,s.iD)("input",{type:i.inputType,readonly:"",class:(0,n.C_)(i.classStyle),onClick:e[0]||(e[0]=(...t)=>r.btnClick&&r.btnClick(...t)),disabled:"disabled-btn"===i.classStyle,value:i.text},null,10,a)}var o={props:{text:{type:[String,Number],default:"一颗小按钮"},inputType:{type:String,default:"button"},classStyle:{type:String,default:"default-btn"}},methods:{btnClick(t){this.$emit("btnClick",t)}}},r=i(963);const d=(0,r.Z)(o,[["render",l],["__scopeId","data-v-ce30ba20"]]);var p=d},4154:function(t,e,i){i.d(e,{Z:function(){return c}});var s=i(4317),n=i(5964);const a={class:"gray-box"},l={class:"title"};function o(t,e,i,o,r,d){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[(0,s._)("h2",null,(0,n.zw)(i.title),1),(0,s._)("div",null,[(0,s.WI)(t.$slots,"right",{},void 0,!0)])]),(0,s._)("div",null,[(0,s.WI)(t.$slots,"content",{},void 0,!0)])])}var r={props:["title"]},d=i(963);const p=(0,d.Z)(r,[["render",o],["__scopeId","data-v-6099d476"]]);var c=p},2793:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var s=i(4317),n=i(5964);const a=t=>((0,s.dD)("data-v-a51b2366"),t=t(),(0,s.Cn)(),t),l={class:"avatar-box"},o={class:"img-box"},r=["src"],d={class:"r-box"},p=a((()=>(0,s._)("h3",{style:{"margin-left":"13px"}},"修改头像",-1))),c={key:0,class:"edit-avatar"},u={t:"1501234940517",class:"icon",style:{},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3014","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20",height:"20"},g=a((()=>(0,s._)("path",{d:"M941.576 184.248l-101.824-101.824L512 410.176 184.248 82.424 82.424 184.248 410.168 512l-327.744 327.752 101.824 101.824L512 613.824l327.752 327.752 101.824-101.824L613.832 512z",fill:"#cdcdcd","p-id":"3015"},null,-1))),h=[g],v={class:"content"},m={class:"edit-l"},w={style:{width:"100px",height:"100px",border:"1px solid #ccc","margin-bottom":"20px",overflow:"hidden"}},_=["src"],f=a((()=>(0,s._)("div",{style:{padding:"10px 0"}},"头像预览",-1))),b={class:"btn"},x=a((()=>(0,s._)("a",{href:"javascript:;"},"重新选择",-1))),y={class:"edit-r"},k={key:0,class:"big",id:"cropper-target"},C=["src"],S={class:"bootom-btn pa"};function I(t,e,i,a,g,I){const D=(0,s.up)("YButton"),A=(0,s.up)("y-button"),j=(0,s.up)("y-shelf");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(j,{title:"账户资料"},{content:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",o,[(0,s._)("img",{src:t.userInfo.info.file,alt:""},null,8,r)]),(0,s._)("div",d,[p,(0,s.Wm)(D,{text:"上传头像",classStyle:"main-btn",style:{margin:"0"},onBtnClick:e[0]||(e[0]=t=>I.editAvatar())})])]),g.editAvatarShow?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(j,{title:"设置头像"},{right:(0,s.w5)((()=>[(0,s._)("span",{class:"close",onClick:e[1]||(e[1]=t=>g.editAvatarShow=!1)},[((0,s.wg)(),(0,s.iD)("svg",u,h))])])),content:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s._)("div",m,[(0,s._)("div",w,[(0,s._)("div",{class:"show-preview",style:(0,n.j5)({width:g.previews.w+"px",height:g.previews.h+"px",overflow:"hidden",zoom:g.option.zoom})},[(0,s._)("div",{style:(0,n.j5)(g.previews.div)},[(0,s._)("img",{src:g.option.img,style:(0,n.j5)(g.previews.img)},null,12,_)],4)],4)]),f,(0,s._)("div",b,[x,(0,s._)("input",{type:"file",onChange:e[2]||(e[2]=t=>I.upimg(t))},null,32)])]),(0,s._)("div",y,[(0,s._)("div",null,[g.option.img?((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("img",{src:g.option.img},null,8,C)])):(0,s.kq)("",!0)])]),(0,s._)("div",S,[(0,s.Wm)(A,{style:{width:"140px",height:"40px","line-height":"40px"},text:"取消",onBtnClick:e[3]||(e[3]=t=>g.editAvatarShow=!1)}),(0,s.Wm)(A,{style:{width:"140px",height:"40px","line-height":"40px"},text:"确定",classStyle:"main-btn",onBtnClick:I.cropper},null,8,["onBtnClick"])])])])),_:1})])):(0,s.kq)("",!0)])),_:1})])}var D=i(2778),A=i(9256),j=i(4154),z=i(9192),F=i(3529),W={data(){return{imgSrc:"",editAvatarShow:!1,cropContext:"",cropperImg:"",previews:{},option:{img:"",zoom:0},fixedNumber:[1,1],example2:{info:!0,size:1,canScale:!1,autoCrop:!0,autoCropWidth:300,autoCropHeight:250,fixed:!0},userId:"",token:""}},computed:{...(0,z.rn)(["userInfo"])},methods:{...(0,z.OI)(["RECORD_USERINFO"]),message(t){this.$message(t)},messageSuccess(t){this.$message({message:t,type:"success"})},messageFail(t){this.$message.error({message:t})},upimg(t){var e=t.target.files[0];if(e.size>1048576)return this.messageFail("图片大小不得超过1Mb"),!1;if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return this.messageFail("图片类型仅支持.gif,jpeg,jpg,png,bmp"),!1;var i=new FileReader;i.readAsDataURL(e),i.onload=t=>{this.option.img=t.target.result}},cropper(){this.option.img?(0,A.ws)({userId:this.userId,token:this.token,imgData:this.option.img}).then((t=>{if(200===t.code){let e=t.result,i=this.userInfo;i.info.file=e,this.editAvatarShow=!1,this.messageSuccess("上传成功")}else this.messageFail(t.message)})):this.messageFail("请选择您的照片")},editAvatar(){this.editAvatarShow=!0},realTime(t){this.previews=t;let e=100/t.w;this.option.zoom=e}},created(){this.userId=(0,F.bh)("userId"),this.token=(0,F.bh)("token")},components:{YButton:D.Z,YShelf:j.Z}},B=i(963);const Z=(0,B.Z)(W,[["render",I],["__scopeId","data-v-a51b2366"]]);var $=Z}}]);
//# sourceMappingURL=793.f20edde8.js.map